<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/wrapper.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/wrapper.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from 'react';
import Combination from '../../../json/combination.json';
import Subjects from '../../../json/subjects.json';
import Oles from '../../../json/oles.json';
import _ from 'lodash';
import State from '../state';

/**
 * A wrapper function for combination.json, subjects.json and oles.json
 * @module Wrapper
 */

class Wrapper {
  constructor (combination, subjects, oles) {
    this.subjectColor = subjectColor;
    this.idToSpan = idToSpan.bind(this);
    this.combination = combination;
    this.subjects = subjects;
    this.oles = oles;
    this.length = combination.length;
  }
}

const subjectColor = {
  'bafs': 'GoldenRod',
  'bio': 'blue',
  'chem': 'Magenta',
  'chist': 'Crimson',
  'cscb': 'purple',
  'cscp': 'red',
  'econ': 'black',
  'geog': 'cyan',
  'hist': 'orange',
  'ict1': 'Navy',
  'ict2': 'OrangeRed',
  'phy': 'Salmon',
  'ths': 'brown',
  'va': 'Violet'
};

/**
 * Convert combination id to span component
 * index is the order of span
 * please ref bootstrap Contextual Colors for contextualColor
 * [contextual colors](http://getbootstrap.com/css/#helper-classes-colors)
*/
function idToSpan (index, _id, lang, contextualColor) {
  let subjectCnames = [];
  const highlight = State.get().highlight;
  const combSubs = this.combination[_id].subjects;

  combSubs.forEach((sub) => {
    subjectCnames.push(convertSubjectCodeToText(sub, lang));
  });

  const highlightGp1 = {
    color: highlight[combSubs[0]] ? this.subjectColor[combSubs[0]] : null
  };

  const highlightGp2 = {
    color: highlight[combSubs[1]] ? this.subjectColor[combSubs[1]] : null
  };

  return (
  &lt;button className={'btn btn-xs btn-' + contextualColor || 'default'} type='button'>
    &lt;span className='badge'>
      {index + 1}
    &lt;/span>&amp;nbsp;
    &lt;span
      style={highlightGp1}>
      {subjectCnames[0]}
    &lt;/span> + &lt;span
      style={highlightGp2}>
      {subjectCnames[1]}
    &lt;/span>
  &lt;/button>
  );
}

const convertSubjectCodeToText = (subject, lang) => {
  return _.result(
    _.find(Subjects, sub => sub.id === subject),
    lang
  );
};

module.exports = new Wrapper(Combination, Subjects, Oles);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ListenAction.html">ListenAction</a></li><li><a href="module-State.html">State</a></li><li><a href="module-Wrapper.html">Wrapper</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Dec 29 2015 23:27:21 GMT+0800 (HKT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
